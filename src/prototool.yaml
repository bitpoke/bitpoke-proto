protoc:
  version: 3.6.1
  includes:
    - ../vendor
lint:
  # we are using Google API Design guide so we need to enable/disable some
  # linting options accordingly
  rules:
    remove:
      - FILE_OPTIONS_EQUAL_GO_PACKAGE_PB_SUFFIX
      - FILE_OPTIONS_REQUIRE_JAVA_MULTIPLE_FILES
      - FILE_OPTIONS_REQUIRE_JAVA_OUTER_CLASSNAME
      - FILE_OPTIONS_REQUIRE_JAVA_PACKAGE
      - REQUEST_RESPONSE_TYPES_UNIQUE
      - REQUEST_RESPONSE_TYPES_IN_SAME_FILE
    add:
      - MESSAGES_HAVE_COMMENTS_EXCEPT_REQUEST_RESPONSE_TYPES
      - RPCS_HAVE_COMMENTS
      - SERVICES_HAVE_COMMENTS

# Code generation directives.
generate:
  go_options:
    import_path: github.com/presslabs/dashboard-go
  plugins:
    - name: gogo
      type: gogo
      flags: plugins=grpc
      output: ../build/go/src/github.com/presslabs/dashboard-go/pkg/proto
    - name: ts
      flags: service=true
      output: ../build/js
    - name: js
      flags: import_style=commonjs,binary
      output: ../build/js
