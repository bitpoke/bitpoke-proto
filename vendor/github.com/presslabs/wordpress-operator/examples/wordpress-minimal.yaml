---
apiVersion: v1
kind: Secret
metadata:
  name: minimal-db
type: Opaque
data:
  ROOT_PASSWORD: bm90LXNvLXNlY3VyZQ==
  USER: d29yZHByZXNz
  PASSWORD: d3AtaW5zZWN1cmU=
  DATABASE: d29yZHByZXNz
---
apiVersion: mysql.presslabs.org/v1alpha1
kind: MysqlCluster
metadata:
  name: minimal
spec:
  replicas: 1
  secretName: minimal-db
---
apiVersion: wordpress.presslabs.org/v1alpha1
kind: Wordpress
metadata:
  name: minimal
spec:
  domains:
    min.localtest.me
  env:
    - name: WORDPRESS_DB_HOST
      value: mysite-mysql-master
    - name: WORDPRESS_DB_USER
      valueFrom:
        secretKeyRef:
          name: mysite-db
          key: USER
    - name: WORDPRESS_DB_PASSWORD
      valueFrom:
        secretKeyRef:
          name: mysite-db
          key: PASSWORD
    - name: WORDPRESS_DB_NAME
      valueFrom:
        secretKeyRef:
          name: mysite-db
          key: DATABASE
